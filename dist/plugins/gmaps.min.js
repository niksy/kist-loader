/*! kist-loader 0.2.0 - Simple asset loader. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b){if(!a.kist&&!a.kist.loader)throw new Error("Please include kist-loader to use Google Maps plugin.");var c,d=function(a){"use strict";var c,d=a.now();return function(e,f,g,h,i){if(c)return c;var j=a.Deferred(),k=function(){j.resolve(b.google&&b.google.maps?b.google.maps:!1)},l="loadGoogleMaps_"+d++,m=a.extend({sensor:i||"false"},f?{key:f}:{},g?{language:g}:{},h?{libraries:h}:{});return b.google&&b.google.maps?k():b.google&&b.google.load?b.google.load("maps",e||3,{other_params:a.param(m),callback:k}):(m=a.extend(m,{callback:l}),b[l]=function(){k(),setTimeout(function(){try{delete b[l]}catch(a){}},20)},a.ajax({dataType:"script",data:m,url:"//maps.googleapis.com/maps/api/js"})),c=j.promise()}}(a);a.extend(a.kist.loader,{loadGmaps:function(b,e){if(c)return c;var f=a.Deferred();return a.when(d(b.mapsVersion,b.apiKey,b.language,b.libraries,b.sensor)).done(function(){b.plugins?a.when(a.kist.loader.load(b.plugins)).done(function(){f.resolve(),e&&e()}).fail(function(){throw message="Some components could not be loaded.",f.reject(message),new Error(message)}):(f.resolve(),e&&e())}).fail(function(){throw message="Google Maps could not be loaded.",f.reject(message),new Error(message)}),c=f.promise()}})}(jQuery,window,document);