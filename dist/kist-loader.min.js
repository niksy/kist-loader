/*! kist-loader 0.4.1 - Simple asset loader. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b){function c(b){var c=[];return b=Array.prototype.slice.call(b),"array"!==a.type(b[0])?c.push(b):c=b,c}function d(a){return"string"==typeof a?a.split():a}function e(b){var c={};switch(a.type(b)){case"array":c.url=b;break;case"string":c.url=b;break;case"object":a.extend(c,b)}return c.url=d(c.url),a.extend({},t.defaults,c)}function f(a){var b="js";return a.match(r.explicitType)?b=a.match(r.explicitType)[1]:a.match(r.extension)&&(b=a.match(r.extension)[1],/jpe?g|png|gif|webp/i.test(b)&&(b="img")),b}function g(a,b){return b=h(b),b=a+"!"+b}function h(a){return a.replace(r.explicitType,"")}function i(b,c){var d=f(b);switch(b=h(b),d){case"js":return m(b,a.extend({},{dataType:"script"},c));case"css":return n(b,c);case"img":return o(b,c);case"txt":case"text":case"template":return m(b,a.extend({},{dataType:"text"},c));case"async":return p(b)}}function j(b,c){var e=[];return b=d(b),a.each(b,function(a,b){e.push(i(b,c))}),e}function k(){var b=Array.prototype.slice.call(arguments),c=b.shift();return b[0]=e(b[0]),a.each(b[0].url,function(a,d){b[0].url[a]=g(c,d)}),t.load.apply(null,b)}function l(b){return q[b.url]&&b.cache?q[b.url].dfd.promise():(b.dfd&&(q[b.url]={},q[b.url].dfd=a.Deferred()),b.promise?(b.cb(),q[b.url].dfd.promise()):b.cb())}function m(b,c){return l({url:b,cache:c.cache,dfd:!1,promise:!0,cb:function(){q[b]={},q[b].dfd=a.ajax(a.extend({url:b,cache:!0},c))}})}function n(b,c){return l({url:b,cache:c.cache,dfd:!1,promise:!1,cb:function(){var d,e=b,f={},g=a("link, style"),h=g.filter(function(){return a(this).data("url")===e}),i=g.filter(function(){return a(this).data("cachedUrl")});return b=c.cache?e:b+"?_="+a.now(),m(b,a.extend({},{dataType:"text"})).done(function(g,j,k){f.url=e,c.cache||(f.cachedUrl=b),0===h.length||c.cache||h.remove(),0!==i.length&&c.cache&&i.remove(),d=a('<link rel="stylesheet" type="text/css" href="'+b+'" />').data(f),"text/plain"===k.getResponseHeader("Content-Type")&&(d=d.add(a('<style type="text/css">'+g+"</style>").data(f))),d.appendTo(s.head)})}})}function o(c,d){return l({url:c,cache:d.cache,dfd:!0,promise:!0,cb:function(){var e=new Image;q[c].dfd.always(function(){e.onload=e.onerror=e.onabort=null}),e.onload=a.proxy(q[c].dfd.resolve,b,e,"success"),e.onerror=e.onabort=a.proxy(q[c].dfd.reject,b,e,"error"),e.src=d.cache?c:c+"?_="+a.now()}})}function p(c){return l({url:c,cache:t.defaults.cache,dfd:!0,promise:!0,cb:function(){var d,e;/connect\.facebook/.test(c)?d="facebook-jssdk":/platform\.twitter/.test(c)?d="twitter-wjs":/apis\.google/.test(c)&&(d="gplus-sdk"),0===a("#"+d).length&&(e=a("<script />",{src:c,id:d}),e.appendTo(s.head)),q[c].dfd.resolve(e[0],"success",b)}})}var q={},r={extension:/\.(\w+)(?:\?.+)?$/i,explicitType:/^(\w+?)!/i},s={head:a("head")},t={load:function(d,f){var g=a.Deferred();return d=e(d),a.when.apply(b,j(d.url,{cache:d.cache})).done(function(){var a=c(arguments);g.resolve.apply(b,a),f&&f.apply(b,a),d.success&&d.success.apply(b,a)}).fail(function(){g.reject.apply(b,arguments),d.error&&d.error.apply(b,arguments)}),g.promise()},loadScript:a.proxy(k,null,"js"),loadStyle:a.proxy(k,null,"css"),loadImage:a.proxy(k,null,"img"),loadText:a.proxy(k,null,"txt"),loadAsync:a.proxy(k,null,"async"),defaults:{cache:!0}};a.kist=a.kist||{},a.kist.loader=t}(jQuery,window,document);