<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Callbacks Google Maps</title>
	<style>
		.sandbox {
			width:500px; height:500px;
		}
	</style>
</head>
<body>

	<button type="button" class="gmaps-done">Load Google Maps, with plugins, callback as argument</button>
	<button type="button" class="gmaps-done-optcb">Load Google Maps, with plugins, callback in object</button>
	<button type="button" class="gmaps-done-optargdfdcb">Load Google Maps, callback in object, as argument and deferred</button>

	<button type="button" class="gmaps-fail">Load Google Maps, non-existent plugins, callback as argument</button>
	<button type="button" class="gmaps-fail-optcb">Load Google Maps, non-existent plugins, callback in object</button>
	<button type="button" class="gmaps-fail-optargdfdcb">Load Google Maps, non-existent plugins, callback in object, as argument and deferred</button>

	<button type="button" class="gmaps-single-fail">Load Google Maps, one plugin is non-existent, callback as argument</button>
	<button type="button" class="gmaps-single-fail-optcb">Load Google Maps, one plugin is non-existent, callback in object</button>
	<button type="button" class="gmaps-single-fail-optargdfdcb">Load Google Maps, one plugin is non-existent, callback in object, as argument and deferred</button>

	<button type="button" class="gmaps-done-sans-plugins">Load Google Maps, no plugins, callback as argument</button>
	<button type="button" class="gmaps-done-sans-plugins-optcb">Load Google Maps, no plugins, callback in object</button>
	<button type="button" class="gmaps-done-sans-plugins-optargdfdcb">Load Google Maps, no plugins, callback in object, as argument and deferred</button>

	<button type="button" class="gmaps-done-basic">Load Google Maps, basic, callback as argument</button>
	<button type="button" class="gmaps-done-basic-optcb">Load Google Maps, basic, callback in object</button>
	<button type="button" class="gmaps-done-basic-optargdfdcb">Load Google Maps, basic, callback in object, as argument and deferred</button>

	<div class="sandbox"></div>

	<script src="../bower_components/jquery/dist/jquery.js"></script>
	<script src="../src/kist-loader.js"></script>
	<script src="../src/addons/gmaps.js"></script>
	<script>

		function successCb () {

			console.log( 'Done' );
			console.log( arguments );

			var map = new google.maps.Map($('.sandbox')[0],{
				zoom: 8,
				center: new google.maps.LatLng(-34.397, 150.644)
			});

			var marker = new google.maps.Marker({
				map: map,
				position: new google.maps.LatLng(-34.397, 150.644),
				visible: true
			});

			var boxText = document.createElement("div");
			boxText.style.cssText = 'border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px;';
			boxText.innerHTML = 'Testingâ€¦';

			var ib = new InfoBox({
				content: boxText
			});
			ib.open(map, marker);

		}

		function errorCb () {

			console.log( 'Fail' );
			console.log( arguments );

		}

		$('.gmaps-done').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ '../bower_components/gmaps-infobox/index.js', '../bower_components/gmaps-maplabel/index.js' ],
					language: 'en',
					libraries: 'geometry'
				}, successCb);

		});

		$('.gmaps-done-optcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ '../bower_components/gmaps-infobox/index.js', '../bower_components/gmaps-maplabel/index.js' ],
					language: 'en',
					libraries: 'geometry',
					success: successCb
				});

		});

		$('.gmaps-done-optargdfdcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ '../bower_components/gmaps-infobox/index.js', '../bower_components/gmaps-maplabel/index.js' ],
					language: 'en',
					libraries: 'geometry',
					success: successCb
				}, successCb)
				.done(successCb);

		});

		$('.gmaps-fail').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ 'x.js', 'y.js' ],
					language: 'en',
					libraries: 'geometry'
				})
				.fail(errorCb);

		});

		$('.gmaps-fail-optcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ 'x.js', 'y.js' ],
					language: 'en',
					libraries: 'geometry',
					error: errorCb
				});

		});

		$('.gmaps-fail-optargdfdcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ 'x.js', 'y.js' ],
					language: 'en',
					libraries: 'geometry',
					error: errorCb
				})
				.fail(errorCb);

		});

		$('.gmaps-single-fail').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ '../bower_components/gmaps-infobox/index.js', 'y.js' ],
					language: 'en',
					libraries: 'geometry'
				})
				.fail(errorCb);

		});

		$('.gmaps-single-fail-optcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ '../bower_components/gmaps-infobox/index.js', 'y.js' ],
					language: 'en',
					libraries: 'geometry',
					error: errorCb
				});

		});

		$('.gmaps-single-fail-optargdfdcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					plugins: [ '../bower_components/gmaps-infobox/index.js', 'y.js' ],
					language: 'en',
					libraries: 'geometry',
					error: errorCb
				})
				.fail(errorCb);

		});

		$('.gmaps-done-sans-plugins').on('click', function () {

			$.kist.loader
				.loadGmaps({
					language: 'en',
					libraries: 'geometry'
				})
				.done(function(){
					console.log( 'Done' );
					console.log( arguments );
				})
				.fail(errorCb);

		});

		$('.gmaps-done-sans-plugins-optcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					language: 'en',
					libraries: 'geometry',
					success: function () {
						console.log( 'Done' );
						console.log( arguments );
					}
				});

		});

		$('.gmaps-done-sans-plugins-optargdfdcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					language: 'en',
					libraries: 'geometry',
					success: function () {
						console.log( 'Done' );
						console.log( arguments );
					}
				}, function () {
					console.log( 'Done' );
					console.log( arguments );
				})
				.done(function () {
					console.log( 'Done' );
					console.log( arguments );
				});

		});

		$('.gmaps-done-basic').on('click', function () {

			$.kist.loader
				.loadGmaps(null, function(){
					console.log( 'Done' );
					console.log( arguments );
				});

		});

		$('.gmaps-done-basic-optcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					success: function(){
						console.log( 'Done' );
						console.log( arguments );
					}
				});

		});

		$('.gmaps-done-basic-optargdfdcb').on('click', function () {

			$.kist.loader
				.loadGmaps({
					success: function(){
						console.log( 'Done' );
						console.log( arguments );
					}
				}, function(){
					console.log( 'Done' );
					console.log( arguments );
				})
				.done(function(){
					console.log( 'Done' );
					console.log( arguments );
				});

		});

	</script>

</body>
</html>
